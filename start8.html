
<!doctype html>
<html lang="en">
<head>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="style.css">
</head>

<div class="navbar">
<a><b>Abhishek Yenumula</b></a>
<div class="dropdown">
  <div class="dropdown">
  		<button class="dropbtn">Team Members Websites</button>
  		<div class="dropdown-content">
    		<a href="https://www.google.com/">Navnit</a>
    		<a href="https://www.google.com/">David</a>
    		<a href="https://www.google.com/">Wesley</a>
    		<a href="https://www.google.com/">Steven</a>
  		</div>
	</div>

  </div>
</div>
</div>

<body onload="checkCookie()">

<div class="containMe" id="grid"></div>
<script src="https://code.jquery.com/jquery-1.12.4.js"> </script>
<script>
  var images = ["11.jpg", "2.jpg", "3.jpg"]; //your urls
  var titles = ["Audi R8", "BMW I8", "Lamborgini Aventador"];
  var desc = ["The Audi R8 is a mid-engine, 2-seater sports car, which uses Audi's trademark quattro permanent all-wheel drive system.  It was introduced by the German car manufacturer Audi AG in 2006. The car is exclusively designed, developed, and manufactured by Audi AG's private subsidiary company manufacturing high performance automotive parts, Audi Sport GmbH (formerly quattro GmbH),and is based on the Lamborghini Gallardo and presently the Lamborghini Huracán platform.",
  "The BMW i8 is a plug-in hybrid sports car developed by BMW. The i8 is part of BMW's electric fleet Project i being marketed as a new sub-brand, BMW i. The 2015 model year BMW i8 has a 7.1 kWh lithium-ion battery pack that delivers an all-electric range of 37 km (23 mi) under the New European Driving Cycle.",
  "The Lamborghini Aventador is a mid-engine sports car produced by the Italian automotive manufacturer Lamborghini. In keeping with Lamborghini tradition, the Aventador is named after a fighting bull. Aventador earned the Trofeo de la Peña La Madroñera for its courage in the arena in Zaragoza, Spain, in 1993."];

var url;
var urlOfDetailPage;
var cookieUrl;

var star = document.createElement("img");
var starUrl = "https://s3.us-east-2.amazonaws.com/phase2project/Star-icon.png";
star.setAttribute("class", "star");
star.setAttribute("src", starUrl);

var url0;
var url1;
var url2;


for (var i=0; i<images.length; i++)
{
console.log("image in iteration is " + images[i]);

url = "https:s3.us-east-2.amazonaws.com/phase2project/" + images[i];
urlOfDetailPage = "detail6.html?" + "img=" + url + "&" + "caption=" + titles[i] + "&" + "description=" + desc[i];

var grid = document.getElementById("grid");
var box = document.createElement("div");
box.setAttribute("class", "box");
var imgDiv = document.createElement("div");
imgDiv.setAttribute("class", "imgDiv");

var imgInDiv = document.createElement("img");
imgInDiv.setAttribute("class","pctImg");
imgInDiv.setAttribute("id", "img" + i);
imgInDiv.setAttribute("src", url);

var link = document.createElement("a");
link.setAttribute("href", urlOfDetailPage);
link.setAttribute("id", "a" + i);
link.appendChild(imgInDiv);
imgDiv.appendChild(link);

var caption = titles[i];
var capNode = document.createTextNode(caption);
var h = document.createElement("h3");
h.setAttribute("class", "caption")
h.appendChild(capNode);
console.log(h);

var favButton = document.createElement("button");
favButton.setAttribute("type", "button");
favButton.setAttribute("class", "buttons");
favButton.setAttribute("id","btnFav" + i);
var favNode = document.createTextNode("Favorite");
favButton.appendChild(favNode);

var unfavButton = document.createElement("button");
unfavButton.setAttribute("type", "button");
unfavButton.setAttribute("class", "buttons");
unfavButton.setAttribute("id","btnUnfav" + i);
var unfavNode = document.createTextNode("Unfavorite");
unfavButton.appendChild(unfavNode);


//document.body.appendChild(capDiv);
box.appendChild(imgDiv);
box.appendChild(h);
box.appendChild(favButton);
box.appendChild(unfavButton);
grid.appendChild(box);
}

$(document).ready(function(){


$("#btnFav0").click(function(){
$("#btnFav0").hide();
btnFav0.parentNode.appendChild(star);
cookieUrl = document.getElementById("img0").src;
setCookie("url", cookieUrl, 30);
console.log("cookie url = " + cookieUrl);
url0 = document.getElementById("a0").href;
var urlOfDetailPageFav = url0 + "&fav=on";
console.log("url of fav detail page = " + urlOfDetailPageFav);
$('#a0').attr("href", urlOfDetailPageFav);
});

$("#btnUnfav0").click(function(){
$("#btnFav0").show();
star.remove(star);
cookieUrl = "";
setCookie("url", cookieUrl, 30);
console.log("cookie url = " + cookieUrl);
$('#a0').attr("href", url0);
});

$("#btnFav1").click(function(){
$("#btnFav1").hide();
btnFav1.parentNode.appendChild(star);
cookieUrl = document.getElementById("img1").src;
setCookie("url", cookieUrl, 30);
console.log("cookie url = " + cookieUrl);
url1 = document.getElementById("a1").href;
var urlOfDetailPageFav = url1 + "&fav=on";
console.log("url of fav detail page = " + urlOfDetailPageFav);
$('#a1').attr("href", urlOfDetailPageFav);
});

$("#btnUnfav1").click(function(){
$("#btnFav1").show();
star.remove(star);
cookieUrl = "";
setCookie("url", cookieUrl, 30);
console.log("cookie url = " + cookieUrl);
$('#a1').attr("href", url1);
});

$("#btnFav2").click(function(){
$("#btnFav2").hide();
btnFav2.parentNode.appendChild(star);
cookieUrl = document.getElementById("img2").src;
setCookie("url", cookieUrl, 30);
console.log("cookie url = " + cookieUrl);
url2 = document.getElementById("a2").href;
var urlOfDetailPageFav = url2 + "&fav=on";
console.log("url of fav detail page = " + urlOfDetailPageFav);
$('#a2').attr("href", urlOfDetailPageFav);
});

$("#btnUnfav2").click(function(){
$("#btnFav2").show();
star.remove(star);
cookieUrl = "";
setCookie("url", cookieUrl, 30);
console.log("cookie url = " + cookieUrl);
$('#a2').attr("href", url2);
});


});

function setCookie(cname, cvalue, exdays) {

var d = new Date();
d.setTime(d.getTime() + (exdays*24*60*60*1000));
var expires = "expires=" + d.toGMTString();
//console.log("expires in " + expires);
document.cookie = cname + "=" + cvalue + "; " + expires;
console.log("cookie is " + document.cookie);
}

function getCookie(cname) {
var name = cname + "=";
var ca = document.cookie.split(';');
for(var i=0; i<ca.length; i++) {
var c = ca[i];
while (c.charAt(0)==' ') c = c.substring(1);
if (c.indexOf(name) == 0) {
return c.substring(name.length, c.length);
}
}
return "";
}

function checkCookie() {
  var c = document.cookie;
  console.log("cookie checker is " + c);
  if (c !="") {
    if (c == "url=https://s3.us-east-2.amazonaws.com/cis311fall2018/Phase3/11.jpg"){
      var btn = document.getElementById("btnFav0");
      $("#btnFav0").hide();
      btnFav0.parentNode.appendChild(starIcon);
      url0 = document.getElementById("a0").href;
      var urlOfDetailPageFav = url0 + "&fav=on";
    }
    else if (c == "url=https://s3.us-east-2.amazonaws.com/cis311fall2018/Phase3/2.jpg"){
      var btn = document.getElementById("btnFav1");
      $("#btnFav1").hide();
      btnFav1.parentNode.appendChild(star);
      url1 = document.getElementById("a1").href;
      var urlOfDetailPageFav = url1 + "&fav=on";
      $('#a1').attr("href", urlOfDetailPageFav);
    }
    else if (c == "url=https://s3.us-east-2.amazonaws.com/cis311fall2018/Phase3/3.jpg"){
      var btn = document.getElementById("btnFav2");
      $("#btnFav2").hide();
      btnFav2.parentNode.appendChild(star);
      url2 = document.getElementById("a2").href;
      var urlOfDetailPageFav = url2 + "&fav=on";
      $('#a2').attr("href", urlOfDetailPageFav);
    }
  }
}


</script>

</body>
</html>
